<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <style>
    * {}

    body {
      border: 10px solid;
      width: 100vw;
      height: 100vh;
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      border-radius: 10px;
      overflow: hidden;
    }

    .first {
      border: 1px solid black;
      position: absolute;
      left: 13px;
      top: 13px;
      width: 90vw;
      height: 50px;
      border-radius: 10px;
      border-top-left-radius: 0;
      border-bottom-left-radius: 0;
      background-color: #00c3e9;
      outline: 2px solid white;
      box-shadow: 0 0 0 3px black;
      font-family: 'Sprintendo', sans-serif;
      font-size: 40px;
      color: white;
      transition: background-color 0.1s ease;
    }
    .first:hover {
      background-color: black;
    }

    .button {
      border: 1px solid;
      position: absolute;
      right: 12px;
      top: 13px;
      width: 2vw;
      height: 50px;
      border-radius: 10px;
      border-top-right-radius: 0;
      border-bottom-right-radius: 0;
      background-color: #ff4554;
      outline: 2px solid white;
      box-shadow: 0 0 0 3px black;
      transition: background-color 0.1s ease;
    }
    .button:hover {
      background-color: black;
    }

    @font-face {
      font-family: 'Sprintendo';
      src: url('https://elbolitatari.github.io/elbolita/assets/fonts/Spritendo.woff2') format('woff2');
    }

    .background {
      position: absolute;
      top: 9px;
      right: 3.3vw;
      height: 56px;
      width: calc(0.1px + 5.09vw);
      text-align: center;
    }

    .buton-container {
      display: grid;
      grid-template-columns: 40px 40px 40px;
      grid-template-rows: 40px 40px 40px;
      gap: 1px;
      position: absolute;
      right: 3.5vh;
      bottom: 3.5vh;
      transition: bottom 0.4s ease;
      z-index: 1001;           /* above the marquee */
    }
    .buton-container.shifted {
      bottom: calc(2.6vh + 190px);
    }
    .buton {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      font-size: 15px;
      font-weight: bold;
      color: white;
      border: 0px solid grey;
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
      box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.3);
      transition: filter 0.1s ease;
    }
    .x { background-color: black; grid-column: 1 / 2; grid-row: 2 / 3; }
    .y { background-color: black; grid-column: 2 / 3; grid-row: 1 / 2; }
    .a { background-color: black; grid-column: 2 / 3; grid-row: 3 / 4; }
    .b { background-color: black; grid-column: 3 / 4; grid-row: 2 / 3; }

    .buton:hover {
      filter: invert(100%);
    }

    .buton.active {
      background-color: lightgrey;
      color: #000;
    }

    #popup-card {
      position: fixed;
      top: 50px;
      right: 12px;
      min-width: 20vw;
      padding: 1px;
      background: #fff;
      border-radius: 6px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      display: none;
      z-index: 999;
      font-family: sans-serif;
      text-align: center;
      height: 37vh;
    }
    #popup-card.open {
      display: block;
    }

    /* bottom bar & slider styles */
    #bottom-bar {
      position: absolute;
      bottom: 1px;
      left: 0;
      width: 100vw;
      height: 10px;
      background-color: black;
      cursor: pointer;
      z-index: 1000;
      transition: border 0.2s ease;
    }
    #bottom-bar:hover {
      border: 1px solid white;
    }
    #slider-panel {
      position: absolute;
      bottom: -200px;
      left: 0;
      width: 100vw;
      height: 185px;
      background-color: #222;
      transition: bottom 0.4s ease;
      z-index: 999;
      color: white;
      font-family: 'Sprintendo', sans-serif;
      font-size: 15px;
      text-align: center;
      padding-top: 2px;
      box-sizing: border-box;
    }
    #slider-panel.open {
      bottom: 10px;
    }

    /* â€”â€”â€” marquee cards â€”â€”â€” */
    .marquee-container {
      position: absolute;
      bottom: 13px;           /* above the   bottom bar, below buttons */
      left: 11px;
      right: 11px;
      height: 182px;
      overflow: hidden;
      z-index: 998;           /* behind the button container */
    }
    .marquee-track {
      display: flex;
      gap: 40px;
      transform: translateX(0);
    }
    .marquee-track .card {
      min-width: 190px;
      height: 190px;
      background-color: rgba(74, 126, 171, 0.6);
      border-radius: 6px;
      overflow: hidden;
      flex-shrink: 0;
    }
    .marquee-track .card img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .marquee-track .card:hover {
      opacity: 0.7;
      filter: brightness(1.0);
    }

  </style>
</head>
<body>

  <div class="first">Victoria Nintendo</div>
  <div class="button"></div>
  <div class="background">
    <svg width="3" height="100">
      <line x1="1" y1="1" x2="1" y2="58" stroke="black" stroke-width="2" />
    </svg>
    <svg width="3" height="100">
      <line x1="1" y1="1" x2="1" y2="58" stroke="black" stroke-width="2" />
    </svg>
  </div>

  <div class="buton-container">
    <button class="buton y">Y</button>
    <button class="buton x">X</button>
    <button class="buton a">A</button>
    <button class="buton b">B</button>
  </div>

  <!-- marquee cards -->
  <div class="marquee-container">
    <div class="marquee-track">
      <div class="card"><img src="https://www.shutterstock.com/image-photo/view-bavaro-beach-punta-cana-260nw-2445326985.jpg"></div>
      <div class="card"><img src="https://www.shutterstock.com/image-photo/bavaro-punta-cana-dominican-republic-600w-2220607533.jpg"></div>
      <div class="card"><img src="https://media.istockphoto.com/id/1418736696/vector/retro-greeting-card-souvenir-sign-from-exotic-destination.jpg?s=1024x1024&w=is&k=20&c=2W9wMptzmBfpxp1fpK3TSph-daosfNK5m8-FFPSPxks=""></div>
      <div class="card"><img src="https://www.shutterstock.com/image-photo/tropical-beach-resorts-palm-trees-600w-2415287839.jpg"></div>
      <!-- duplicate for smooth loop -->
      <div class="card"><img src="https://www.shutterstock.com/image-photo/dominican-republic-19-february-2022-600w-2225886507.jpg"></div>
      <div class="card"><img src="https://www.shutterstock.com/image-vector/dominican-republic-260nw-268350248.jpg"></div>
      <div class="card"><img src="https://www.shutterstock.com/image-photo/bavaro-punta-cana-dominican-republic-260nw-1527598181.jpg"></div>
      <div class="card"><img src="https://www.shutterstock.com/image-photo/dominican-republic-punta-cana-9-260nw-1596943021.jpg"></div>
    </div>
  </div>

  <!-- slider panel & bottom bar -->
  <div id="slider-panel">
    <p>Hereâ€™s your slider content.</p>
  </div>
  <div id="bottom-bar"></div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // existing popup-card logic
      const card = document.createElement('div');
      card.id = 'popup-card';
      document.body.appendChild(card);
      card.addEventListener('click', e => e.stopPropagation());
      let currentButton = null, pendingButton = null;
      function getTargetPosition() {
        const w = card.offsetWidth;
        return {
          targetX: window.innerWidth - 10 - w,
          targetY: 50
        };
      }
      function getButtonCenter(b) {
        const r = b.getBoundingClientRect();
        return { centerX: r.left + r.width/2, centerY: r.top + r.height/2 };
      }
      function openCard(btn) {
        currentButton = btn;
        card.textContent = `ðŸ”– Card for â€œ${btn.textContent}â€`;
        const { targetX, targetY } = getTargetPosition();
        const { centerX, centerY } = getButtonCenter(btn);
        const dx = centerX - targetX, dy = centerY - targetY;
        card.style.transition = 'none';
        card.style.transform = `translate(${dx}px, ${dy}px)`;
        card.style.opacity = '0';
        card.classList.add('open');
        card.offsetHeight;
        card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        setTimeout(() => {
          card.style.transform = '';
          card.style.opacity = '1';
        }, 0);
      }
      function closeCard(cb) {
        const { targetX, targetY } = getTargetPosition();
        let dx = 0, dy = 20;
        if (currentButton) {
          const { centerX, centerY } = getButtonCenter(currentButton);
          dx = centerX - targetX;
          dy = centerY - targetY;
        }
        card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        card.style.transform = `translate(${dx}px, ${dy}px)`;
        card.style.opacity = '0';
        card.addEventListener('transitionend', function h(e) {
          if (e.propertyName === 'opacity') {
            card.classList.remove('open');
            card.style.transform = '';
            if (cb) cb();
          }
        }, { once: true });
      }
      document.querySelectorAll('.buton').forEach(btn => {
        btn.addEventListener('click', e => {
          e.stopPropagation();
          if (currentButton === btn && card.classList.contains('open')) {
            btn.classList.remove('active');
            closeCard(() => currentButton = null);
            return;
          }
          if (card.classList.contains('open')) {
            pendingButton = btn;
            closeCard(() => {
              document.querySelectorAll('.buton.active').forEach(b => b.classList.remove('active'));
              openCard(pendingButton);
              pendingButton.classList.add('active');
              pendingButton = null;
            });
          } else {
            openCard(btn);
            btn.classList.add('active');
          }
        });
      });

      // slider-panel + pushing buttons up
      const bottomBar = document.getElementById('bottom-bar');
      const sliderPanel = document.getElementById('slider-panel');
      const btnContainer = document.querySelector('.buton-container');

      bottomBar.addEventListener('click', () => {
        sliderPanel.classList.toggle('open');
        btnContainer.classList.toggle('shifted');
      });
    });
// infinite marquee logic
const marqueeTrack = document.querySelector('.marquee-track');
let pos = 0;
const speed = 1;           // pixels per frame

function stepMarquee() {
  pos -= speed;

  const firstCard = marqueeTrack.firstElementChild;
  const cardWidth = firstCard.offsetWidth + parseInt(getComputedStyle(marqueeTrack).gap);

  // once first card has fully scrolled past, recycle it
  if (Math.abs(pos) >= cardWidth) {
    pos += cardWidth;
    marqueeTrack.appendChild(firstCard);
  }

  marqueeTrack.style.transform = `translateX(${pos}px)`;
  requestAnimationFrame(stepMarquee);
}

requestAnimationFrame(stepMarquee);

let marqueePaused = false;
const marqueeContainer = document.querySelector('.marquee-container');

marqueeContainer.addEventListener('mouseenter', () => marqueePaused = true);
marqueeContainer.addEventListener('mouseleave', () => marqueePaused = false);
function stepMarquee() {
  // if a card is hovered, skip moving
  if (!document.querySelector('.marquee-track .card:hover')) {
    pos -= speed;

    const firstCard = marqueeTrack.firstElementChild;
    const gap      = parseInt(getComputedStyle(marqueeTrack).gap, 10);
    const cardWidth = firstCard.offsetWidth + gap;

    if (Math.abs(pos) >= cardWidth) {
      pos += cardWidth;
      marqueeTrack.appendChild(firstCard);
    }
    marqueeTrack.style.transform = `translateX(${pos}px)`;
  }

  requestAnimationFrame(stepMarquee);
}

  </script>

</body>
</html>
