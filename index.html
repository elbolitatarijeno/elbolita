<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <style>
    * {}

    body {
      border: 10px solid;
      width: 100vw;
      height: 100vh;
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      border-radius: 10px;
      overflow: hidden;
    }

    .first {
      border: 1px solid black;
      position: absolute;
      left: 13px;
      top: 13px;
      width: 90vw;
      height: 50px;
      border-radius: 10px;
      border-top-left-radius: 0;
      border-bottom-left-radius: 0;
      background-color: #00c3e9;
      outline: 2px solid white;
      box-shadow: 0 0 0 3px black;
      font-family: 'Sprintendo', sans-serif;
      font-size: 40px;
      color: white;
      transition: background-color 0.1s ease;
    }
    .first:hover {
      background-color: black;
    }

    .button {
      border: 1px solid;
      position: absolute;
      right: 12px;
      top: 13px;
      width: 2vw;
      height: 50px;
      border-radius: 10px;
      border-top-right-radius: 0;
      border-bottom-right-radius: 0;
      background-color: #ff4554;
      outline: 2px solid white;
      box-shadow: 0 0 0 3px black;
      transition: background-color 0.1s ease;
    }
    .button:hover {
      background-color: black;
    }

    @font-face {
      font-family: 'Sprintendo';
      src: url('https://elbolitatari.github.io/elbolita/assets/fonts/Spritendo.woff2') format('woff2');
    }

    .background {
      position: absolute;
      top: 9px;
      right: 3.3vw;
      height: 56px;
      width: calc(0.1px + 5.09vw);
      text-align: center;
    }

    .buton-container {
      display: grid;
      grid-template-columns: 30px 30px 30px;
      grid-template-rows: 30px 30px 30px;
      gap: 1px;
      position: absolute;
      right: 2.6vh;
      bottom: 2.6vh;
      transition: bottom 0.4s ease;
    }
    .buton-container.shifted {
      bottom: calc(2.6vh + 100px);
    }
    .buton {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      font-size: 15px;
      font-weight: bold;
      color: white;
      border: none;
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
      box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.5);
      transition: filter 0.1s ease;
    }
    .x { background-color: black; grid-column: 1 / 2; grid-row: 2 / 3; }
    .y { background-color: black; grid-column: 2 / 3; grid-row: 1 / 2; }
    .a { background-color: black; grid-column: 2 / 3; grid-row: 3 / 4; }
    .b { background-color: black; grid-column: 3 / 4; grid-row: 2 / 3; }

    .buton:hover {
      filter: invert(100%);
    }

    .buton.active {
      background-color: lightgrey;
      color: #000;
    }

    #popup-card {
      position: fixed;
      top: 50px;
      right: 12px;
      min-width: 20vw;
      padding: 1px;
      background: #fff;
      border-radius: 6px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      display: none;
      z-index: 999;
      font-family: sans-serif;
      text-align: center;
      height: 37vh;
    }
    #popup-card.open {
      display: block;
    }

    /* bottom bar & slider styles */
    #bottom-bar {
      position: absolute;
      bottom: 1px;
      left: 0;
      width: 100vw;
      height: 10px;
      background-color: black;
      cursor: pointer;
      z-index: 1000;
    }
    #slider-panel {
      position: absolute;
      bottom: -200px;
      left: 0;
      width: 100vw;
      height: 100px;
      background-color: #222;
      transition: bottom 0.4s ease;
      z-index: 999;
      color: white;
      font-family: sans-serif;
      text-align: center;
      padding-top: 2px;
      box-sizing: border-box;
      font-family: 'Sprintendo', sans-serif;
      font-size: 15px;
    }
    #slider-panel.open {
      bottom: 10px; /* sits just above the bottom bar */
    }
  </style>
</head>
<body>

  <div class="first">Victoria Nintendo</div>
  <div class="button"></div>
  <div class="background">
    <svg width="3" height="100">
      <line x1="1" y1="1" x2="1" y2="58" stroke="black" stroke-width="2" />
    </svg>
    <svg width="3" height="100">
      <line x1="1" y1="1" x2="1" y2="58" stroke="black" stroke-width="2" />
    </svg>
  </div>

  <div class="buton-container">
    <button class="buton y">Y</button>
    <button class="buton x">X</button>
    <button class="buton a">A</button>
    <button class="buton b">B</button>
  </div>

  <!-- slider panel & bottom bar -->
  <div id="slider-panel">
    <p>Here’s your slider content.</p>
  </div>
  <div id="bottom-bar"></div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // existing popup-card logic
      const card = document.createElement('div');
      card.id = 'popup-card';
      document.body.appendChild(card);
      card.addEventListener('click', e => e.stopPropagation());
      let currentButton = null, pendingButton = null;
      function getTargetPosition() {
        const w = card.offsetWidth;
        return {
          targetX: window.innerWidth - 10 - w,
          targetY: 50
        };
      }
      function getButtonCenter(b) {
        const r = b.getBoundingClientRect();
        return { centerX: r.left + r.width/2, centerY: r.top + r.height/2 };
      }
      function openCard(btn) {
        currentButton = btn;
        card.textContent = `🔖 Card for “${btn.textContent}”`;
        const { targetX, targetY } = getTargetPosition();
        const { centerX, centerY } = getButtonCenter(btn);
        const dx = centerX - targetX, dy = centerY - targetY;
        card.style.transition = 'none';
        card.style.transform = `translate(${dx}px, ${dy}px)`;
        card.style.opacity = '0';
        card.classList.add('open');
        card.offsetHeight;
        card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        setTimeout(() => {
          card.style.transform = '';
          card.style.opacity = '1';
        }, 0);
      }
      function closeCard(cb) {
        const { targetX, targetY } = getTargetPosition();
        let dx = 0, dy = 20;
        if (currentButton) {
          const { centerX, centerY } = getButtonCenter(currentButton);
          dx = centerX - targetX;
          dy = centerY - targetY;
        }
        card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        card.style.transform = `translate(${dx}px, ${dy}px)`;
        card.style.opacity = '0';
        card.addEventListener('transitionend', function h(e) {
          if (e.propertyName === 'opacity') {
            card.classList.remove('open');
            card.style.transform = '';
            if (cb) cb();
          }
        }, { once: true });
      }
      document.querySelectorAll('.buton').forEach(btn => {
        btn.addEventListener('click', e => {
          e.stopPropagation();
          if (currentButton === btn && card.classList.contains('open')) {
            btn.classList.remove('active');
            closeCard(() => currentButton = null);
            return;
          }
          if (card.classList.contains('open')) {
            pendingButton = btn;
            closeCard(() => {
              document.querySelectorAll('.buton.active').forEach(b => b.classList.remove('active'));
              openCard(pendingButton);
              pendingButton.classList.add('active');
              pendingButton = null;
            });
          } else {
            openCard(btn);
            btn.classList.add('active');
          }
        });
      });

      // slider-panel + pushing buttons up
      const bottomBar = document.getElementById('bottom-bar');
      const sliderPanel = document.getElementById('slider-panel');
      const btnContainer = document.querySelector('.buton-container');

      bottomBar.addEventListener('click', () => {
        sliderPanel.classList.toggle('open');
        btnContainer.classList.toggle('shifted');
      });
    });
  </script>

</body>
</html>
